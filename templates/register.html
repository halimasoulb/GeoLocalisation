{% extends "layout.html" %}
{% block content %}
<script>

 if("geolocation" in navigator){
    navigator.geolocation.getCurrentPosition(function (p){
        //var data = {"longitude" : p.coords.longitude, "latitude" : p.coords.latitude};
        var data = p 
        var json = JSON.stringify(data);

        $.ajax({
            type: "POST",
            url: "/register",
            data: json,
            ContentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg){
                alert('In Ajax');
                alert('data:' + data);
            }
        });

        console.log(p);
    }, function (e){
        ipLookup();
    });
 } else
 ipLookup();
 function ipLookup(){

 }
</script>
    <div class="content-section">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            {% from "_formhelpers.html" import render_field %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Enregistrer cas</legend>
                <div class="form-group" >
                    {{render_field(form.prenom)}}
                </div>
                <div class="form-group">
                    {{render_field(form.nom)}}  
                </div>
                <div class="form-group">
                    {{render_field(form.date_de_naissance)}}
                </div>
                <div class="form-group">
                    {{render_field(form.lieu_de_naissance)}}
                </div>
                 <div class="form-group">
                    {{render_field(form.cin)}}
                </div>
            </fieldset>
            <div class="form-group">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
        </form>
    </div>
     <div id="mapid"></div>

{% endblock content %}